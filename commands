#---------------------------------Profiles & Shell--------------------------------------------------
https://bencane.com/2013/09/16/understanding-a-little-more-about-etcprofile-and-etcbashrc/

0)Display all the SHELL VARIABLES, run:
set

00)Display all the ENVIRONMENT VARIABLES, run:
env

1)Verify which shell your're running:
echo $SHELL

2)Verify env var PATH, which describes the location of different progs
echo $PATH

PATH is set by the shell every time it launches

3)Add a new program to path (efemere)

export PATH=$PATH:/place/with/the/file

4)Add export PATH=$PATH:/place/with/the/file line in the ~/.bash_profile, ~/.bashrc, or ~/.profile



#---------------------------------Networking--------------------------------------------------

iwconfig #configure a wireless network interface , used to display wifi statistics from /proc/net/wireless
ifconfig  ##interface config of the network interfaces on the system eth0 is for NIC connected to the network, lo the loopback, wlan0 or unifi for wireless
ifconfig eth0 up   ## bring up or down an interface
ip address show

echo 0 >/proc/sys/net/ipv4/icmp_echo_ignore_all  ### 0: renable ping reponse 1: disable ping reponse   

netstat -tulpn %%% list all ports for TCP and UDP connections

#change hostname
vim /etc/hostname 
vim /etc/hosts

# DNS resolution(errors like ssh can not resolve hostname or could not resolve DNS ) - 
A match found in the /etc/hosts file will be used before any DNS entry

vim /etc/hosts and add ip and domain name
vim /etc/resolv.conf



/etc/resolv.conf: Lists nameservers that are used by your host for DNS resolution. 
                If you are using DHCP, this file is automatically populated with DNS record issued by DHCP server.
/etc/hosts/: It is just a static lookup method for resolution.
/etc/nsswitch.conf: It defined order of resolution. 
Who should it consult first for resolution, a DNS or a host file? For example, if the file has following configuration hosts: 
files dns then /etc/hosts 
file will be checked first for resolution, if domain is still un-resolvable, DNS will then be consulted.

So the order of name resolution is actually defined in /etc/nsswitch.conf, which usually has this entry:

hosts:          files dns
which means "try files (/etc/hosts); and if it fails, try DNS."

https://nambirajeshblog.wordpress.com/2016/12/12/difference-between-etchosts-vs-etcresolv-conf-in-linux/


# IPTables is a rule based firewall and it is pre-installed on most of Linux operating system
# IP tables main files are at
etc/init.d/iptables – init script to start|stop|restart and save rulesets.
/etc/sysconfig/iptables – where Rulesets are saved.
/sbin/iptables – binary

#--------------------Filesystem-------------------------------------------------------------------

In order to automatically mount file at boot modify the os filesystem table  /etc/fstab. 

In general you should mount to /mnt directory

>> mount -v %% view mount points
>> findmnt

>> mount /dev/sdaX /media/usb_created_dir %% mount volume or  mount /dev/sdaX /mnt/usb_created_dir
>> umount /dev/sdaX /media/usr_created_dir

mount | grep "^/dev/sda"  // attach the filesystem found on some device
ls /dev/sd*  //view attached filessytems
cat /sys/bus/usb/devices/*/product | grep STICK_NAME //view inserted USBs  


# --------------------Search--------------------------------------------------------------------------------

find / -type f file_name %%%%Search everywhere
find . -type f -size 1033c
find /home -name *.jpg	
find /home/alex -iname "*.ini"  
find /home/alex -type d -iname "dir_name"
find . -type f -name file_name


%%%search in files Recursive case insensitive and list files
grep -iRl "string" /etc/* 2> /dev/null


#-----------------------FileSize----------------------------------------------------------------------------

Disk usage per file and directory:
 du -sh  /dir_path/file_name
 du -h --max-depth=1 /dir_path

 Disk usage per Filesystem:
 df -ah   %% disk free, available and used space

#------------------------Service and procs----------------------------------------------------------
systemctl status docker %%% verify service status on older distro is service docker status


ps aux | grep -i apt   %%%  lock /var/lib/dpkg/lock
lsof  %%% View files opened by a process  $(ls -l /proc/`pidof proccess`/fd) fd = file descriptor
 
   
# 1. Stop the web services on web server nodes - service httpd stop
# 2. Shutdown the database services on db server nodes - service mysql stop
# 3. Restart all servers (web and db) at once - /sbin/shutdown -r
# 4. Start the database services on db server nodes - service mysql start
# 5. Start the web services on web server nodes - service httpd start



#---------Hard-link vs Soft-link------------------------------------------------------------------

ln file hardlink_file  
ln -s file softlink_file

-----------------------FIlE-101----------------------

./script.sh |& tee output_file  %print to STDOUT and redirect to file in the same time

# Count lines,chars:
>> wc -n
>> wv -l

#STDIN to file
>> cat > file

# View first 5 lines from a file , or paginate the result in terminal
>> head -n5 file_name
>> cat file_name | more

# Search in file content
>> grep -i -E "first|second|third" file.txt #search in fie.txt using grouping for "first" or "second" or "third" words

egrep -o '^[^.]+' %%%%% grep until a desired character , in this example is the .
grep -o -E '[0-9]+'  %%%%%%grep only from a numbercat

ls -l | grep YOOO //returns all desired files which have YOO in their name
grep -ni 'word' ./path_of_file/file.txt  //searches inside files
grep -A10 -B10    %%%%%%grep after and before 10 lines




sed -i 's/word1/word2/g' ./path_of_file  %%%%%% replaces word1 with word2
sed '1~2d'   ./filepath  %%%print without the first two lines
sed -n /root/p             %%%prints the line with the patter in this case is 'root'
sed '/^$/d'               %%% eliminates blank lines

read inf
echo "$inf"
cat test.txt
sed -i "s/hello/$inf/g" /home/cg/root/test.txt    %%%%%% give sed a variable as a parameter



tr 'E' 'e'         %%%%%%%    replaces E with e
tr -d 'e'           %%%%%    delete "e" character
tr -d [:digit:]     %%%%  delete all digits
tr -cd [:digit:]    %%%%% delete all chars except digits
tr -cd [:print:]     %%%% remove all non printable characters
tr -s '\n' ' ' < file.txt %%%%  translate all newlines into spaces and make the result as a single line.




# Select only the entries in a particular column, search util a desired delimiter " " and returning only the 9th field
>> cat sql.log | cut -d" " -f9 | sort | uniq  
cut -c2 file.txt //return the chars from each line o  second column 
cut -c2-3 file.txt //range 2-3th collumns 

#view differences between two files------------------------------------------------------------------
diff file1 file2
diff -s file1.txt file2.txt %%%outputs files are identical if they are



#change color-------------------------------------------------------------------------------
echo -e "\e[1;32m text color change \e[0m"


#sound------------------------------------------------------------------------------------
cat /proc/asound/cards  //view sound cards
aplay -l     //view sound cards
pactl set-sin-mute 0 1  //mute sink
pactl -- set-sink-volume 0 100%  //change volume sink
pactl stat  /view sinc status
arecord -d 10 /tmp/sound_test.wav   //record for 10sec sound to tmp directory
aplay 


#---------------------------------Tricks--------------------------------------------------

%History activation
set +x 


%Change hostname name
vim /etc/hostname
vim /etc/hosts

%Change back to last dir
cd -

%Execute last command (with sudo)
sudo !!


%Quick awk to get the first collumn
ps aux | awk '{print $1}`

%Display file or file system status
stat file
stat dir

%Show WHO is logged 
w

%quick diff
vimdiff file1 file2
diff -y file1 file2


%show ret code for last command
echo $?

% verify file type
file file_name

% view ascii from binary file
strings file_name

%update bash_profile from cli
cat << EOF >> ~/.bash_profile
# Add Visual Studio Code (code)
export PATH="\$PATH:/Applications/Visual Studio Code.app/Contents/Resources/app/bin"
EOF




